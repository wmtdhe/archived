(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{382:function(t,r,e){"use strict";e.r(r);var _=e(25),v=Object(_.a)({},(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("HTTP 2.0的出现，大幅提高了Web的性能。在完全与HTTP 1.X兼容语义的基础上，进一步减少了网络延迟。")]),t._v(" "),e("h2",{attrs:{id:"http-2-0-优势"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-2-0-优势"}},[t._v("#")]),t._v(" HTTP 2.0 优势")]),t._v(" "),e("h3",{attrs:{id:"_1-多路复用（multiplexing）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-多路复用（multiplexing）"}},[t._v("#")]),t._v(" 1.多路复用（Multiplexing）")]),t._v(" "),e("blockquote",[e("p",[t._v("多路复用允许同时单一的HTTP 2.0连接发起多重的请求-响应消息。")])]),t._v(" "),e("p",[t._v("在HTTP 1.1协议中，"),e("strong",[t._v("浏览器客户端在同一时间，针对同一域名下的请求有一定数量限制。超过限制数目的请求会被阻塞")]),t._v("。")]),t._v(" "),e("p",[t._v("各浏览器对于HTTP 1.1 请求数量的限制：\n"),e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/4/8/1715a5cd11c31ded?w=708&h=359&f=jpeg&s=27589",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"_2-二进制分帧（binary-format）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-二进制分帧（binary-format）"}},[t._v("#")]),t._v(" 2.二进制分帧（Binary Format）")]),t._v(" "),e("p",[t._v("在不改动HTTP 1.X语义、方法、状态码、URI以及首部字段。。。的情况下，HTTP 2是如何做到"),e("strong",[t._v("突破HTTP1.1的性能限制，改进传输性能，实现低延迟和高吞吐量的")]),t._v("？")]),t._v(" "),e("p",[e("strong",[t._v("帧")]),t._v("(frame)包含部分：类型Type, 长度Length, 标记Flags, 流标识Stream和frame payload有效载荷。")]),t._v(" "),e("p",[e("strong",[t._v("消息")]),t._v("(message)：一个完整的请求或者响应，比如请求、响应等，由一个或多个 Frame 组成。")]),t._v(" "),e("p",[t._v("在二进制分帧层上，http2.0会将所有传输信息分割为更小的消息和帧，并对它们采用二进制格式的编码将其封装，新增的二进制分帧层同时也能够保证http的各种动词，方法，首部都不受影响，兼容上一代http标准。其中，http1.X中的"),e("strong",[t._v("首部信息header封装到Headers帧")]),t._v("中，而request body将被封装到Data帧中。")]),t._v(" "),e("h3",{attrs:{id:"_3-头部压缩（header-compression）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-头部压缩（header-compression）"}},[t._v("#")]),t._v(" 3.头部压缩（Header Compression）")]),t._v(" "),e("p",[t._v("HTTP1.X的头中带有大量的信息，而且每次请求都要重新发送。HTTP2.0使用"),e("strong",[t._v("Encoder")]),t._v("来减少需要传输的header的大小，"),e("strong",[t._v("通讯双方")]),t._v("各自"),e("strong",[t._v("缓存")]),t._v("一分头部字段表，既避免了重复的header传输，又减小了需要传输的大小。")]),t._v(" "),e("p",[t._v("对于相同的数据，不再通过每次请求和响应发送，通信期间几乎不会改变通用键-值对（用户代理、可接受的媒体类型、等等）只需要发送一次。")]),t._v(" "),e("p",[t._v("如果首部发生变化，只需要将变化的部分加入到"),e("strong",[t._v("header帧")]),t._v("中，改变的部分会加入到"),e("strong",[t._v("头部字段表")]),t._v("中，首部表在HTTP2.0的连接存续期始终存在，由客户端和服务器共同渐进地更新。")]),t._v(" "),e("p",[t._v("HTTP2.0使用HPACK算法来进行首部压缩\n"),e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/10/31/16e208ee3331569a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"_4-请求优先级（request-priorities）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-请求优先级（request-priorities）"}},[t._v("#")]),t._v(" 4.请求优先级（Request Priorities）")]),t._v(" "),e("p",[t._v("把HTTP消息分为很多独立帧后，就可以通过优化这些帧的交错和传输顺序进一步优化性能。每个流都可以带一个31比特的优先值："),e("strong",[t._v("0")]),t._v("表示最高优先；"),e("strong",[t._v("2^31")]),t._v("表示最低优先级。")]),t._v(" "),e("ul",[e("li",[t._v("优先级最高：主要的html")]),t._v(" "),e("li",[t._v("优先级高：CSS文件")]),t._v(" "),e("li",[t._v("优先级中：js文件")]),t._v(" "),e("li",[t._v("优先级低：图片")])]),t._v(" "),e("h3",{attrs:{id:"_5-服务器推送（server-push）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-服务器推送（server-push）"}},[t._v("#")]),t._v(" 5.服务器推送（Server Push）")]),t._v(" "),e("p",[t._v("服务器可以对一个客户端请求发送多个响应，服务器向客户端推送资源"),e("strong",[t._v("无需客户端明确地请求")]),t._v("。并且，服务端推送能把客户端所需要的资源伴随着index.html一起发送到客户端，省去了客户端重复请求的步骤。")]),t._v(" "),e("p",[t._v("正因为"),e("strong",[t._v("没有发起请求，建立连接等操作")]),t._v("，所以静态资源通过服务端推送的方式可以极大地提升速度。Server Push 让 http1.x 时代使用内嵌资源的优化手段变得没有意义；如果一个请求是由你的主页发起的，服务器很可能会响应主页内容、logo 以及样式表，因为它知道客户端会用到这些东西，这相当于在一个 HTML 文档内集合了所有的资源。")]),t._v(" "),e("p",[t._v("不过与之相比，服务器推送还有一个很大的优势："),e("strong",[t._v("可以缓存")]),t._v("！也让在遵循同源的情况下，不同页面之间可以共享缓存资源成为可能。")]),t._v(" "),e("p",[t._v("参考来源："),e("a",{attrs:{href:"https://juejin.im/entry/6844903984524705800",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP2.0"),e("OutboundLink")],1)])])}),[],!1,null,null,null);r.default=v.exports}}]);