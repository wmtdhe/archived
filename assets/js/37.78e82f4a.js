(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{383:function(e,t,o){"use strict";o.r(t);var v=o(25),c=Object(v.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h3",{attrs:{id:"cors中的预检请求-preflighted-requests-in-cors"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#cors中的预检请求-preflighted-requests-in-cors"}},[e._v("#")]),e._v(" CORS中的预检请求 Preflighted Requests in CORS")]),e._v(" "),o("blockquote",[o("p",[e._v("一个CORS预检请求指的是一个检查CORS协议是否被理解，并且服务端知晓请求的方法和请求头的一个请求。")]),e._v(" "),o("p",[e._v("一个预检("),o("code",[e._v("OPTIONS")]),e._v(")请求，会携带三个指定的请求头："),o("code",[e._v("Access-Control-Request-Method")]),e._v(", "),o("code",[e._v("Access-Control-Request-Headers")]),e._v("和"),o("code",[e._v("Origin")])]),e._v(" "),o("p",[e._v("预检请求通常是浏览器自动发出的")])]),e._v(" "),o("p",[e._v("以下列请求信息为例，在跨域资源请求中（"),o("code",[e._v("CORS")]),e._v("），会先发一个方法为"),o("code",[e._v("OPTIONS")]),e._v("的预请求，然后服务端再响应是否接受这个请求。"),o("code",[e._v("Access-Control-Request-Method")]),e._v("是预请求中的一部分，它会告知服务端之后实际请求所用的方法，在下列例子中会通知服务端接下来的实际请求方法是"),o("code",[e._v("POST")]),e._v("。"),o("code",[e._v("Access-Control-Request-Header")]),e._v("是预请求中告知服务端哪些"),o("code",[e._v("Header")]),e._v("之后会被携带在请求中，在下列例子中会告知接下来的实际请求会携带"),o("code",[e._v("X-PINGOTHER")]),e._v("和"),o("code",[e._v("Content-Type")]),e._v("。在接收到这个预请求的信息后，服务端现在有了一个决定要不要接受在这些条件下的一个请求的机会。")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("OPTIONS /resources/post-here/ HTTP/1.1 \nHost: bar.other \nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 \nAccept-Language: en-us,en;q=0.5 \nAccept-Encoding: gzip,deflate \nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7 \nConnection: keep-alive \nOrigin: http://foo.example \nAccess-Control-Request-Method: POST \nAccess-Control-Request-Headers: X-PINGOTHER, Content-Type\n")])])]),o("p",[e._v("服务端响应时，会携带"),o("code",[e._v("Access-Control-Allow-Methods")]),e._v("，以下列例子来说，服务端允许"),o("code",[e._v("POST")]),e._v(", "),o("code",[e._v("GET")]),e._v("和"),o("code",[e._v("OPTIONS")]),e._v("来进行请求。")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("HTTP/1.1 204 No Content\nDate: Mon, 01 Dec 2008 01:15:39 GMT \nServer: Apache/2.0.61 (Unix) \nAccess-Control-Allow-Origin: http://foo.example \nAccess-Control-Allow-Methods: POST, GET, OPTIONS \nAccess-Control-Allow-Headers: X-PINGOTHER, Content-Type \nAccess-Control-Max-Age: 86400 \nVary: Accept-Encoding, Origin\nKeep-Alive: timeout=2, max=100 \nConnection: Keep-Alive\n")])])]),o("h4",{attrs:{id:"简单请求-simple-request"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#简单请求-simple-request"}},[e._v("#")]),e._v(" 简单请求 (Simple Request)")]),e._v(" "),o("blockquote",[o("p",[e._v("简单请求不会触发预检请求")])]),e._v(" "),o("p",[e._v("一个"),o("strong",[e._v("简单请求")]),e._v("需要满足以下条件：")]),e._v(" "),o("ul",[o("li",[e._v("是以下的某一个方法\n"),o("ul",[o("li",[o("code",[e._v("GET")])]),e._v(" "),o("li",[o("code",[e._v("HEAD")])]),e._v(" "),o("li",[o("code",[e._v("POST")])])])]),e._v(" "),o("li",[e._v("除开那些自动被浏览器设置的请求头（例如，"),o("code",[e._v("Connection")]),e._v(", "),o("code",[e._v("User-Agent")]),e._v("），剩下的能人为设置的请求头只能是如下被列在"),o("code",[e._v("CORS-safelisted request-header")]),e._v("中的请求头：\n"),o("ul",[o("li",[o("code",[e._v("Accept")])]),e._v(" "),o("li",[o("code",[e._v("Accept-Language")])]),e._v(" "),o("li",[o("code",[e._v("Content-Language")])]),e._v(" "),o("li",[o("code",[e._v("Content-Type")]),e._v("(注意接下来的附加要求)")]),e._v(" "),o("li",[o("code",[e._v("DPR")])]),e._v(" "),o("li",[o("code",[e._v("Downlink")])]),e._v(" "),o("li",[o("code",[e._v("Save-Data")])]),e._v(" "),o("li",[o("code",[e._v("Viewport-Width")])]),e._v(" "),o("li",[o("code",[e._v("Width")])])])]),e._v(" "),o("li",[o("code",[e._v("Content-Type")]),e._v("请求头只能是以下值：\n"),o("ul",[o("li",[o("code",[e._v("application/x-www-form-urlencoded")])]),e._v(" "),o("li",[o("code",[e._v("multiplart/form-data")])]),e._v(" "),o("li",[o("code",[e._v("text/plain")])])])]),e._v(" "),o("li",[e._v("请求中使用到的"),o("code",[e._v("XMLHttpRequestUpload")]),e._v("对象没有注册事件监听")]),e._v(" "),o("li",[e._v("请求中没有使用"),o("code",[e._v("ReadableStream")]),e._v("对象")])])])}),[],!1,null,null,null);t.default=c.exports}}]);